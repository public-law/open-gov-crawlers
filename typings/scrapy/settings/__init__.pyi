"""
This type stub file was generated by pyright.
"""

import copy
import json
from __future__ import annotations
from importlib import import_module
from pprint import pformat
from types import ModuleType
from typing import Any, Dict, Iterable, Iterator, List, Mapping, MutableMapping, Optional, TYPE_CHECKING, Tuple, Union, cast
from scrapy.settings import default_settings
from _typeshed import SupportsItems
from typing_extensions import Self

_SettingsKeyT = Union[bool, float, int, str, None]
if TYPE_CHECKING:
    _SettingsInputT = Union[SupportsItems[_SettingsKeyT, Any], str, None]
SETTINGS_PRIORITIES: Dict[str, int] = ...
def get_settings_priority(priority: Union[int, str]) -> int:
    """
    Small helper function that looks up a given string priority in the
    :attr:`~scrapy.settings.SETTINGS_PRIORITIES` dictionary and returns its
    numerical value, or directly returns a given numerical priority.
    """
    ...

class SettingsAttribute:
    """Class for storing data related to settings attributes.

    This class is intended for internal usage, you should try Settings class
    for settings configuration, not this one.
    """
    def __init__(self, value: Any, priority: int) -> None:
        ...
    
    def set(self, value: Any, priority: int) -> None:
        """Sets value if priority is higher or equal than current priority."""
        ...
    
    def __repr__(self) -> str:
        ...
    


class BaseSettings(MutableMapping[_SettingsKeyT, Any]):
    """
    Instances of this class behave like dictionaries, but store priorities
    along with their ``(key, value)`` pairs, and can be frozen (i.e. marked
    immutable).

    Key-value entries can be passed on initialization with the ``values``
    argument, and they would take the ``priority`` level (unless ``values`` is
    already an instance of :class:`~scrapy.settings.BaseSettings`, in which
    case the existing priority levels will be kept).  If the ``priority``
    argument is a string, the priority name will be looked up in
    :attr:`~scrapy.settings.SETTINGS_PRIORITIES`. Otherwise, a specific integer
    should be provided.

    Once the object is created, new settings can be loaded or updated with the
    :meth:`~scrapy.settings.BaseSettings.set` method, and can be accessed with
    the square bracket notation of dictionaries, or with the
    :meth:`~scrapy.settings.BaseSettings.get` method of the instance and its
    value conversion variants. When requesting a stored key, the value with the
    highest priority will be retrieved.
    """
    __default = ...
    def __init__(self, values: _SettingsInputT = ..., priority: Union[int, str] = ...) -> None:
        ...
    
    def __getitem__(self, opt_name: _SettingsKeyT) -> Any:
        ...
    
    def __contains__(self, name: Any) -> bool:
        ...
    
    def get(self, name: _SettingsKeyT, default: Any = ...) -> Any:
        """
        Get a setting value without affecting its original type.

        :param name: the setting name
        :type name: str

        :param default: the value to return if no setting is found
        :type default: object
        """
        ...
    
    def getbool(self, name: _SettingsKeyT, default: bool = ...) -> bool:
        """
        Get a setting value as a boolean.

        ``1``, ``'1'``, `True`` and ``'True'`` return ``True``,
        while ``0``, ``'0'``, ``False``, ``'False'`` and ``None`` return ``False``.

        For example, settings populated through environment variables set to
        ``'0'`` will return ``False`` when using this method.

        :param name: the setting name
        :type name: str

        :param default: the value to return if no setting is found
        :type default: object
        """
        ...
    
    def getint(self, name: _SettingsKeyT, default: int = ...) -> int:
        """
        Get a setting value as an int.

        :param name: the setting name
        :type name: str

        :param default: the value to return if no setting is found
        :type default: object
        """
        ...
    
    def getfloat(self, name: _SettingsKeyT, default: float = ...) -> float:
        """
        Get a setting value as a float.

        :param name: the setting name
        :type name: str

        :param default: the value to return if no setting is found
        :type default: object
        """
        ...
    
    def getlist(self, name: _SettingsKeyT, default: Optional[List[Any]] = ...) -> List[Any]:
        """
        Get a setting value as a list. If the setting original type is a list, a
        copy of it will be returned. If it's a string it will be split by ",".

        For example, settings populated through environment variables set to
        ``'one,two'`` will return a list ['one', 'two'] when using this method.

        :param name: the setting name
        :type name: str

        :param default: the value to return if no setting is found
        :type default: object
        """
        ...
    
    def getdict(self, name: _SettingsKeyT, default: Optional[Dict[Any, Any]] = ...) -> Dict[Any, Any]:
        """
        Get a setting value as a dictionary. If the setting original type is a
        dictionary, a copy of it will be returned. If it is a string it will be
        evaluated as a JSON dictionary. In the case that it is a
        :class:`~scrapy.settings.BaseSettings` instance itself, it will be
        converted to a dictionary, containing all its current settings values
        as they would be returned by :meth:`~scrapy.settings.BaseSettings.get`,
        and losing all information about priority and mutability.

        :param name: the setting name
        :type name: str

        :param default: the value to return if no setting is found
        :type default: object
        """
        ...
    
    def getdictorlist(self, name: _SettingsKeyT, default: Union[Dict[Any, Any], List[Any], Tuple[Any], None] = ...) -> Union[Dict[Any, Any], List[Any]]:
        """Get a setting value as either a :class:`dict` or a :class:`list`.

        If the setting is already a dict or a list, a copy of it will be
        returned.

        If it is a string it will be evaluated as JSON, or as a comma-separated
        list of strings as a fallback.

        For example, settings populated from the command line will return:

        -   ``{'key1': 'value1', 'key2': 'value2'}`` if set to
            ``'{"key1": "value1", "key2": "value2"}'``

        -   ``['one', 'two']`` if set to ``'["one", "two"]'`` or ``'one,two'``

        :param name: the setting name
        :type name: string

        :param default: the value to return if no setting is found
        :type default: any
        """
        ...
    
    def getwithbase(self, name: _SettingsKeyT) -> BaseSettings:
        """Get a composition of a dictionary-like setting and its `_BASE`
        counterpart.

        :param name: name of the dictionary-like setting
        :type name: str
        """
        ...
    
    def getpriority(self, name: _SettingsKeyT) -> Optional[int]:
        """
        Return the current numerical priority value of a setting, or ``None`` if
        the given ``name`` does not exist.

        :param name: the setting name
        :type name: str
        """
        ...
    
    def maxpriority(self) -> int:
        """
        Return the numerical value of the highest priority present throughout
        all settings, or the numerical value for ``default`` from
        :attr:`~scrapy.settings.SETTINGS_PRIORITIES` if there are no settings
        stored.
        """
        ...
    
    def __setitem__(self, name: _SettingsKeyT, value: Any) -> None:
        ...
    
    def set(self, name: _SettingsKeyT, value: Any, priority: Union[int, str] = ...) -> None:
        """
        Store a key/value attribute with a given priority.

        Settings should be populated *before* configuring the Crawler object
        (through the :meth:`~scrapy.crawler.Crawler.configure` method),
        otherwise they won't have any effect.

        :param name: the setting name
        :type name: str

        :param value: the value to associate with the setting
        :type value: object

        :param priority: the priority of the setting. Should be a key of
            :attr:`~scrapy.settings.SETTINGS_PRIORITIES` or an integer
        :type priority: str or int
        """
        ...
    
    def setdefault(self, name: _SettingsKeyT, default: Any = ..., priority: Union[int, str] = ...) -> Any:
        ...
    
    def setdict(self, values: _SettingsInputT, priority: Union[int, str] = ...) -> None:
        ...
    
    def setmodule(self, module: Union[ModuleType, str], priority: Union[int, str] = ...) -> None:
        """
        Store settings from a module with a given priority.

        This is a helper function that calls
        :meth:`~scrapy.settings.BaseSettings.set` for every globally declared
        uppercase variable of ``module`` with the provided ``priority``.

        :param module: the module or the path of the module
        :type module: types.ModuleType or str

        :param priority: the priority of the settings. Should be a key of
            :attr:`~scrapy.settings.SETTINGS_PRIORITIES` or an integer
        :type priority: str or int
        """
        ...
    
    def update(self, values: _SettingsInputT, priority: Union[int, str] = ...) -> None:
        """
        Store key/value pairs with a given priority.

        This is a helper function that calls
        :meth:`~scrapy.settings.BaseSettings.set` for every item of ``values``
        with the provided ``priority``.

        If ``values`` is a string, it is assumed to be JSON-encoded and parsed
        into a dict with ``json.loads()`` first. If it is a
        :class:`~scrapy.settings.BaseSettings` instance, the per-key priorities
        will be used and the ``priority`` parameter ignored. This allows
        inserting/updating settings with different priorities with a single
        command.

        :param values: the settings names and values
        :type values: dict or string or :class:`~scrapy.settings.BaseSettings`

        :param priority: the priority of the settings. Should be a key of
            :attr:`~scrapy.settings.SETTINGS_PRIORITIES` or an integer
        :type priority: str or int
        """
        ...
    
    def delete(self, name: _SettingsKeyT, priority: Union[int, str] = ...) -> None:
        ...
    
    def __delitem__(self, name: _SettingsKeyT) -> None:
        ...
    
    def copy(self) -> Self:
        """
        Make a deep copy of current settings.

        This method returns a new instance of the :class:`Settings` class,
        populated with the same values and their priorities.

        Modifications to the new object won't be reflected on the original
        settings.
        """
        ...
    
    def freeze(self) -> None:
        """
        Disable further changes to the current settings.

        After calling this method, the present state of the settings will become
        immutable. Trying to change values through the :meth:`~set` method and
        its variants won't be possible and will be alerted.
        """
        ...
    
    def frozencopy(self) -> Self:
        """
        Return an immutable copy of the current settings.

        Alias for a :meth:`~freeze` call in the object returned by :meth:`copy`.
        """
        ...
    
    def __iter__(self) -> Iterator[_SettingsKeyT]:
        ...
    
    def __len__(self) -> int:
        ...
    
    def copy_to_dict(self) -> Dict[_SettingsKeyT, Any]:
        """
        Make a copy of current settings and convert to a dict.

        This method returns a new dict populated with the same values
        and their priorities as the current settings.

        Modifications to the returned dict won't be reflected on the original
        settings.

        This method can be useful for example for printing settings
        in Scrapy shell.
        """
        ...
    
    def pop(self, name: _SettingsKeyT, default: Any = ...) -> Any:
        ...
    


class Settings(BaseSettings):
    """
    This object stores Scrapy settings for the configuration of internal
    components, and can be used for any further customization.

    It is a direct subclass and supports all methods of
    :class:`~scrapy.settings.BaseSettings`. Additionally, after instantiation
    of this class, the new object will have the global default settings
    described on :ref:`topics-settings-ref` already populated.
    """
    def __init__(self, values: _SettingsInputT = ..., priority: Union[int, str] = ...) -> None:
        ...
    


def iter_default_settings() -> Iterable[Tuple[str, Any]]:
    """Return the default settings as an iterator of (name, value) tuples"""
    ...

def overridden_settings(settings: Mapping[_SettingsKeyT, Any]) -> Iterable[Tuple[str, Any]]:
    """Return an iterable of the settings that have been overridden"""
    ...

